2022-02-22  Philippe Normand  <pnormand@igalia.com>

        [GStreamer] Switch media player to playbin3
        https://bugs.webkit.org/show_bug.cgi?id=236884

        Reviewed by Xabier Rodriguez-Calvar.

        Replace WEBKIT_GST_USE_PLAYBIN3 with WEBKIT_GST_USE_PLAYBIN2 that allows to opt-out of
        playbin3, if this is desired.

        * Scripts/webkitpy/port/gtk.py:
        (GtkPort.setup_environ_for_server):
        * Scripts/webkitpy/port/wpe.py:
        (WPEPort.setup_environ_for_server):

2022-02-22  Jonathan Bedard  <jbedard@apple.com>

        [git-webkit] Extract revision from `git svn dcommit`
        https://bugs.webkit.org/show_bug.cgi?id=236849
        <rdar://problem/89155179>

        Reviewed by Ryan Haddad.

        * Scripts/libraries/webkitscmpy/setup.py: Bump version.
        * Scripts/libraries/webkitscmpy/webkitscmpy/__init__.py: Ditto.
        * Scripts/libraries/webkitscmpy/webkitscmpy/mocks/local/git.py:
        (Git): Thoroughly mock `dcommit`
        * Scripts/libraries/webkitscmpy/webkitscmpy/program/land.py:
        (Land.main): Extract committed SVN revision from `git svn dcommit` command to accurately
        match landed commits to the pull request that generated them.
        * Scripts/libraries/webkitscmpy/webkitscmpy/test/land_unittest.py:
        (repository): Add revision to local commit.

2022-02-22  Dean Jackson  <dino@apple.com>

        Filter some build output from JSC
        https://bugs.webkit.org/show_bug.cgi?id=236885

        Reviewed by Simon Fraser.

        Add some filter rules for recently added output. In particular:
        - whatever prints out the build command
        - python executables now having the version numbers in the binary
        - creating entitlements files

        * Scripts/filter-build-webkit:
        (shouldIgnoreLine):

2022-02-22  Aditya Keerthi  <akeerthi@apple.com>

        [iOS] Adopt new _UITextSearching method for range comparison
        https://bugs.webkit.org/show_bug.cgi?id=237012
        rdar://88442811

        Reviewed by Devin Rousso.

        Ensure TestSearchAggregator conforms to _UITextSearchAggregator.

        * TestWebKitAPI/Tests/WebKitCocoa/FindInPage.mm:
        (-[TestSearchAggregator initWithCompletionHandler:]):
        (-[TestSearchAggregator allFoundRanges]):
        (-[TestSearchAggregator invalidateFoundRange:inDocument:]):
        (-[TestSearchAggregator invalidate]):
        (textRangesForQueryString):
        (-[TestSearchAggregator foundRanges]): Deleted.

2022-02-22  Angelos Oikonomopoulos  <angelos@igalia.com>

        [JSC] Guard against dead remotes in numberOfProcessors
        https://bugs.webkit.org/show_bug.cgi?id=236643

        Reviewed by Adrian Perez de Castro.

        Instead of using only the first remote (and then defaulting to 1 when
        it happens to not respond), try all the remotes in sequence.

        Also, instead of trying the sysctl version on all hosts first and
        only try nproc after sysctl has failed on all hosts, combine
        sysctl and nproc in one command to speed things along.

        This change also removes the numProcessors == 0 typo in the rescue
        path.

        * Scripts/run-jsc-stress-tests:

2022-02-22  Carlos Garcia Campos  <cgarcia@igalia.com>

        [GTK] Can't run performance tests due to a11y errors
        https://bugs.webkit.org/show_bug.cgi?id=230705

        Reviewed by Sergio Villar Senin.

        Disable a11y in WTR since it's no longer nedded with ATSPI.

        * WebKitTestRunner/gtk/main.cpp:
        (main):
        * WebKitTestRunner/wpe/main.cpp:
        (main):

2022-02-21  Brandon Stewart  <brandonstewart@apple.com>

        Use ArgumentParser for parsing args in generate-compile-commands
        https://bugs.webkit.org/show_bug.cgi?id=236995

        Reviewed by Alexey Proskuryakov.

        Use argument parser instead of sys.argv[1] for getting build dir.

        * Scripts/generate-compile-commands:

2022-02-21  Wenson Hsieh  <wenson_hsieh@apple.com>

        [iOS] Adjust some behaviors around the "Markup Image" action in the callout bar
        https://bugs.webkit.org/show_bug.cgi?id=236980

        Reviewed by Aditya Keerthi.

        Add an API test to verify that "Markup Image" appears as the first non-default callout bar item when a single
        image element is in the selection range. The test is comprised of three parts:

        1. Select just a single image, and expect the "Markup Image" item.
        2. Select all images in the document, and expect no "Markup Image" item.
        3. Select a single image and some surrounding text, and expect the "Markup Image" item.

        See WebKit/ChangeLog for more details.

        * TestWebKitAPI/Tests/WebKitCocoa/ImageAnalysisTests.mm:
        (TestWebKitAPI::createWebViewWithTextRecognitionEnhancements):
        (TestWebKitAPI::swizzledSetMenuItems):
        (TestWebKitAPI::TEST):
        * TestWebKitAPI/Tests/WebKitCocoa/multiple-images.html:

        Add some text before and after each image so that we can select a single image alongside some text, and exercise
        the changes in `WebPage::getPlatformEditorState` (see WebKit changes for more information).

2022-02-21  Jon Lee  <jonlee@apple.com>

        Add test name to the image diff template
        https://bugs.webkit.org/show_bug.cgi?id=237003

        Reviewed by Sam Weinig.

        * Scripts/webkitpy/layout_tests/controllers/test_result_writer.py:
        (TestResultWriter.write_image_diff_files):

== Rolled over to ChangeLog-2022-02-22 ==
